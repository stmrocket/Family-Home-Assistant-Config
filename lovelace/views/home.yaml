#############################################################################################################################################
#                                                                                                                                           #
#                                                               VIEW 0 - HOME                                                               #
#                                                                                                                                           #
#############################################################################################################################################

id: 0
icon: mdi:castle
title: Home
popup_cards:
  !include /config/lovelace/popup/popup_home.yaml
cards:
  #################################################################
  #                                                               #
  #                      Home - Weather Card                      #
  #                                                               #
  #################################################################

  - type: vertical-stack
    cards:
      - !include /config/lovelace/cards/weather.yaml

      #################################################################
      #                                                               #
      #                       Home - Cameras                          #
      #                                                               #
      #################################################################
      - type: glance
        columns: 4
        show_name: true
        show_state: false
        entities:
          - entity: camera.front_porch
          - entity: camera.driveway
          - entity: camera.back_yard
          - entity: camera.back_porch
          - entity: camera.garage
          - entity: camera.foyer
          - entity: camera.den
      - type: "custom:gap-card"
        height: 1
  #################################################################
  #                                                               #
  #                          Home - HVAC                          #
  #                                                               #
  #################################################################
  - type: vertical-stack
    cards:
      - type: custom:stack-in-card
        cards:
          - type: custom:simple-thermostat
            entity: climate.thermostat
            icon: mdi:thermostat-box
            step_size: 1
            decimals: 0
            sensors:
              - attribute: current_humidity
                name: Humidity
                unit: "%"
              - entity: sensor.hvac_system_state
                name: State
            hide:
              state: true
            control:
              - hvac:
                  mode: none

          - type: horizontal-stack
            cards:
              - type: custom:bar-card
                name: "Heat:"
                entity: sensor.hvac_system_heat_runtime
                entity_row: true
                positions:
                  icon: "off"
                  name: inside
                  value: inside
                padding: 4px
                card_style:
                  border-radius: 5px
                max: 24
                color: red
                decimal: 2
                style: |-
                  .contentbar-direction-right {
                    flex-direction: column;
                  }
                  .min-direction-right {
                    margin: 0px;
                    margin-bottom: -20px;
                    bottom: 10px;
                  }
                    bar-card-value {
                    margin: 0px;
                    font-size: 13px;
                    margin-left: auto;
                    margin-right: auto;
                    font-weight: bold;
                    text-shadow: 1px 1px #0005;
                  }
                  bar-card-name {
                    margin: 0px;
                    margin-top: 5px;
                    font-size: 14px;
                    font-weight: bold;
                    text-shadow: 1px 1px #0005;              
                  }
                  bar-card-max {
                    margin: 0px;
                    margin-left: auto;
                    margin-top: -20px;
                    top: 10px;
                  }
                  bar-card-divider {
                    display: none;
                  }

              - type: custom:bar-card
                name: "Cool:"
                entity: sensor.hvac_system_cool_runtime
                entity_row: true
                positions:
                  icon: "off"
                  name: inside
                  value: inside
                padding: 4px
                card_style:
                  border-radius: 5px
                max: 24
                color: blue
                decimal: 2
                style: |-
                  .contentbar-direction-right {
                    flex-direction: column;
                  }
                  .min-direction-right {
                    margin: 0px;
                    margin-bottom: -20px;
                    bottom: 10px;
                  }
                    bar-card-value {
                    margin: 0px;
                    font-size: 13px;
                    margin-left: auto;
                    margin-right: auto;
                    font-weight: bold;
                    text-shadow: 1px 1px #0005;
                  }
                  bar-card-name {
                    margin: 0px;
                    margin-top: 5px;
                    font-size: 14px;
                    font-weight: bold;
                    text-shadow: 1px 1px #0005;              
                  }
                  bar-card-max {
                    margin: 0px;
                    margin-left: auto;
                    margin-top: -20px;
                    top: 10px;
                  }
                  bar-card-divider {
                    display: none;
                  }

      - type: custom:mini-graph-card
        entities:
          - sensor.acurite_outside_temperature
        name: Outside
        height: 46
        line_width: 2
        font_size: 65
        hours_to_show: 168
        points_per_hour: 1
        show:
          icon: false
          extrema: true
        color_thresholds:
          - value: 90
            color: "#e74c3c"
          - value: 60
            color: "#1db954"
          - value: 32
            color: "#3498db"

      - type: conditional
        conditions:
          - entity: switch.christmas_tree
            state_not: "unavailable"
          - entity: switch.christmas_tree
            state_not: "unknown"
        card:
          type: horizontal-stack
          cards:
            - type: "custom:button-card"
              entity: switch.christmas_tree
              color_type: icon
              color: rgb(228, 94, 101)
              icon: mdi:pine-tree
              name: Tree
              hold_action:
                action: more-info
            - type: "custom:gap-card"
            - type: "custom:gap-card"
            - type: "custom:gap-card"            

  ################################################################
  #                                                               #
  #                          Home - Laundry                       #
  #                                                               #
  #################################################################
  - type: vertical-stack
    cards:
      - type: horizontal-stack
        cards:
          - type: custom:button-card
            entity: sensor.litter_robot_status_short
            color_type: icon
            icon: mdi:cat
            state:
              - value: Ready
                color: rgb(255, 255, 255)
                name: >-
                  [[[ return `Ready -
                  ${states['sensor.litter_robot_drawer_level'].state}%` ]]]
              - value: Clean
                color: rgb(255, 255, 255)
                name: Clean
              - value: Drawer 2
                color: rgb(255, 255, 255)
                name: Drawer 2
              - value: Drawer 1
                color: rgb(255, 255, 255)
                name: Drawer 1
              - value: Sensor
                color: rgb(228, 94, 101)
                name: Sensor
              - value: Timing
                color: rgb(255, 255, 255)
                name: Timing
              - value: Bonnet
                color: rgb(228, 94, 101)
                name: Bonnet
              - value: Paused
                color: rgb(228, 94, 101)
                name: Paused
              - value: 'Off'
                color: rgb(255, 255, 255)
                name: 'Off'
              - value: Full
                color: rgb(228, 94, 101)
                name: Full
              - value: Error
                color: rgb(228, 94, 101)
                name: Error
            tap_action:
              action: fire-dom-event
              browser_mod:
                service: script.popup_pooper
                data:
                  browser_id: THIS
          - type: custom:button-card
            entity: sensor.washer_status_combined
            color_type: icon
            icon: mdi:washing-machine
            state:
              - value: 'Off'
                color: rgb(255, 255, 255)
                name: '[[[ return `${states[''sensor.washer_status_combined''].state}` ]]]'
              - operator: default
                color: rgb(228, 94, 101)
                name: '[[[ return `${states[''sensor.washer_status_combined''].state}` ]]]'
            tap_action:
              action: more-info
          - type: custom:button-card
            entity: sensor.dryer_status_combined
            color_type: icon
            icon: mdi:tumble-dryer
            state:
              - value: 'Off'
                color: rgb(255, 255, 255)
                name: '[[[ return `${states[''sensor.dryer_status_combined''].state}` ]]]'
              - operator: default
                color: rgb(228, 94, 101)
                name: '[[[ return `${states[''sensor.dryer_status_combined''].state}` ]]]'
            tap_action:
              action: more-info
      - type: horizontal-stack
        cards:
          - type: "custom:button-card"
            entity: switch.manual_timer_lights
            color_type: icon
            icon: mdi:lamp
            state:
              - value: "on"
                color: rgb(228, 94, 101)
              - value: "off"
                color: rgb(255, 255, 255)
            name: All
            hold_action:
              action: more-info
          - type: "custom:button-card"
            entity: lock.front_door
            color_type: icon
            state:
              - value: "locked"
                color: rgb(255, 255, 255)
                icon: mdi:lock
              - value: "unlocked"
                color: rgb(228, 94, 101)
                icon: mdi:lock-open
            name: Front
            tap_action:
              action: call-service
              service: lock.lock
              service_data:
                entity_id: lock.front_door
            hold_action:
              action: more-info

          - type: "custom:button-card"
            entity: lock.garage_entry
            color_type: icon
            state:
              - value: "locked"
                color: rgb(255, 255, 255)
                icon: mdi:lock
              - value: "unlocked"
                color: rgb(228, 94, 101)
                icon: mdi:lock-open
            name: Garage
            tap_action:
              action: call-service
              service: lock.lock
              service_data:
                entity_id: lock.garage_entry
            hold_action:
              action: more-info

          - type: "custom:button-card"
            entity: lock.back_door
            color_type: icon
            state:
              - value: "locked"
                color: rgb(255, 255, 255)
                icon: mdi:lock
              - value: "unlocked"
                color: rgb(228, 94, 101)
                icon: mdi:lock-open
            name: Back
            tap_action:
              action: call-service
              service: lock.lock
              service_data:
                entity_id: lock.back_door
            hold_action:
              action: more-info

      #################################################################
      #                                                               #
      #                      Home - Alarm                             #
      #                                                               #
      #################################################################
      - type: alarm-panel
        name: House Alarm
        states:
          - arm_home
          - arm_away
          - arm_night
        entity: alarm_control_panel.house
