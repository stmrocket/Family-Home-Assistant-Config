- alias: Refresh Entity Counters
  trigger:
  - platform: time_pattern
    minutes: "/15"  
  action:
  - service: homeassistant.update_entity
    entity_id: 
      - sensor.automation_count
      - sensor.binary_sensor_count
      - sensor.switch_count
      - sensor.fan_count
      - sensor.lights_count
      - sensor.tracker_count
      - sensor.media_player_count
      - sensor.script_count
      - sensor.sensor_count

- alias: Doorbell Announcement
  trigger:
    - platform: state
      entity_id: sensor.doorbell
      from: 'Normal'
      to: 'Violated'
  action:
    - service: notify.alexa_media
      data:
        message: "Someone is at the front door."
        data:
          type: announce
          method: all
        target:
          - media_player.alexa_craft
          - media_player.alexa_master
          - media_player.alexa_kitchen

- alias: 'Set Theme to Midnight'
  initial_state: 'on'
  trigger:
    - platform: homeassistant
      event: start
  action:
    - service: frontend.set_theme
      data:
        name: midnight                  